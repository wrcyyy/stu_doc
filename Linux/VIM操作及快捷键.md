[参考文档](https://www.runoob.com/linux/linux-vim.html)

# vi和vim

所有的 Unix Like 系统都会内建 vi 文书编辑器，其他的文书编辑器则不一定会存在。

但是目前我们使用比较多的是 vim 编辑器。

vim 具有程序编辑的能力，可以主动的以字体颜色辨别语法的正确性，方便程序设计。

# 什么是vim

Vim是从 vi 发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。

简单的来说， vi 是老式的字处理器，不过功能已经很齐全了，但是还是有可以进步的地方。 vim 则可以说是程序开发者的一项很好用的工具。

连 vim 的官方网站 (http://www.vim.org) 自己也说 vim 是一个程序开发工具而不是文字处理软件。

# 三种模式

vim分为三种模式：

1. 命令模式（command mode）
2. 输入模式（input mode）
3. 末行模式（last line mode）

## 命令模式

- 默认启动vim时就处于该模式
- 任何时候，按一下`Esc`键即可进入该模式

在该模式下，用户可以输入各种合法的Vi命令，用于管理自己的文档。

此时从键盘上输入的任何字符都被当做编辑命令来解释，若输入的字符是合法的Vi命令，则Vi在接受用户命令之后完成相应的动作。

**常用命令**：

1. `i`切换到输入模式
2. `x`删除当前光标所在位置的字符
3. `:`切换到末行模式，用于在底部输入命令

## 输入模式

**常用按键**

1. 字符按键及`Shift`组合，输入字符
2. `ENTER`回车键，换行
3. `BACK SPACE`，退格键，删除光标前的一个字符
4. `DEL`，删除键，删除光标后的一个字符
5. 方向键，在文本中移动光标
6. `HOME/END`，移动光标到行首/行尾
7. `Page Up/Page Down`，上/下翻页
8. `Insert`，切换为输入模式/替换模式，光标将变成竖线/下划线
9. `Esc`，退出输入模式，切换到命令模式

## 末行模式

在命令模式下按下:（英文冒号）就进入了底线命令模式。

底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

在底线命令模式中，基本的命令有（已经省略了冒号）：

- `q`退出程序
- `w`保存文件

按ESC键可随时退出底线命令模式。

# vim 按键说明

按键|功能
----|---
`/word`|向光标之下寻找一个名称为 word 的字符串。例如要在档案内搜寻 vbird 这个字符串，就输入 /vbird 即可！ (常用)
`?word`|向光标之上寻找一个字符串名称为 word 的字符串。
`n`|这个 n 是英文按键。代表重复前一个搜寻的动作。举例来说， 如果刚刚我们执行 /vbird 去向下搜寻 vbird 这个字符串，则按下 n 后，会向下继续搜寻下一个名称为 vbird 的字符串。如果是执行 ?vbird 的话，那么按下 n 则会向上继续搜寻名称为 vbird 的字符串！
`N`|这个 N 是英文按键。与 n 刚好相反，为『反向』进行前一个搜寻动作。 例如 /vbird 后，按下 N 则表示『向上』搜寻 vbird 。
`:1,$s/word1/word2/g`或`:%s/word1/word2/g`|从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！(常用)
`dd`|删除游标所在的那一整行(常用)
`yy`|复制游标所在的那一行(常用)

# 使用技巧

## 防止粘贴后缩进乱掉

在 Vim 中粘贴代码时，粘贴的代码会有大量多余的缩进，逐行累加。

Vim 编辑模式中有一个 Paste 模式，在该模式下，可将文本保持原样粘贴到 Vim 中，以避免一些格式错误。

在 Vim 中键入命令：

```shell
# 设置 粘贴模式
:set paste
# 取消 粘贴模式
:set nopaste
```
用以切换粘贴模式，在粘贴模式下进行粘贴，就不会遇到缩进混乱的问题了。